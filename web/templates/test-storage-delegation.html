{{define "content"}}
<div class="onboard-header">
    <h1>Test Storage</h1>
    <div class="progress-bar">
        <div class="progress-step completed">
            <span class="step-number">1</span>
            <span class="step-label">Enter DID</span>
        </div>
        <div class="progress-step active">
            <span class="step-number">2</span>
            <span class="step-label">Provide Delegation</span>
        </div>
        <div class="progress-step">
            <span class="step-number">3</span>
            <span class="step-label">Test Storage</span>
        </div>
    </div>
</div>

<div class="onboard-step">
    <div class="step-content">
        <h2>Step 2: Submit Delegation</h2>
        <p class="step-intro">
            Submit your delegation proof to authorize storage testing.
        </p>
        
        {{if .TestSession}}
        <div class="session-info">
            <h3>Test Session Details</h3>
            <table>
                <tr>
                    <td><strong>DID:</strong></td>
                    <td><code>{{.TestSession.DID}}</code></td>
                </tr>
            </table>
        </div>
        {{end}}
        
        <form action="/test-storage/delegation" method="post" class="onboard-form">
            {{if .TestSessionID}}
            <input type="hidden" name="test_session_id" value="{{.TestSessionID}}">
            {{end}}
            
            <div class="form-group">
                <label for="delegation" class="form-label">
                    Delegation Proof *
                </label>
                <textarea 
                    id="delegation" 
                    name="delegation" 
                    class="form-textarea" 
                    rows="10"
                    placeholder="Paste your delegation proof here..."
                    required
                >{{.FormData.Delegation}}</textarea>
                <div class="form-help">
                    Paste the delegation proof generated by your storage node. This should be a base64-encoded UCAN delegation.
                </div>
            </div>
            
            <div class="form-actions">
                <button type="submit" class="btn btn-primary">Test Storage</button>
                <a href="/test-storage" class="btn btn-secondary">Start Over</a>
            </div>
        </form>
    </div>
    
    <div class="step-help">
        <h3>Need Help?</h3>
        <p>
            The delegation proof is a cryptographic proof that you control the storage node 
            and have the necessary permissions to provide storage services.
        </p>
        <details class="help-details">
            <summary>{{.HelpTexts.DelegationProof.Title}}</summary>
            <p>{{.HelpTexts.DelegationProof.Description}}</p>
            {{if .HelpTexts.DelegationProof.Command}}
            <pre><code>{{.HelpTexts.DelegationProof.Command}}</code></pre>
            {{end}}
        </details>
    </div>
</div>
{{end}}